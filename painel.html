<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Painel Administrativo - Alpha's Burgues</title>
    <style>
        body {
            background-color: #ffe8d4;
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
        }

        .back-link {
            position: fixed;
            top: 10px;
            left: 10px;
            z-index: 1000;
        }

        .back-link a {
            background-color: #e65c00;
            color: white;
            padding: 8px 16px;
            text-decoration: none;
            border-radius: 20px;
            font-weight: bold;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }

        .back-link a:hover {
            background-color: #d63384;
        }

        header {
            background-color: #ffcf96;
            text-align: center;
            padding: 20px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .tabs {
            display: flex;
            background-color: #fff0e0;
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 20px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .tab-button {
            flex: 1;
            padding: 15px;
            background-color: #ffc285;
            border: none;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            transition: background-color 0.3s;
        }

        .tab-button:hover {
            background-color: #ffb95c;
        }

        .tab-button.active {
            background-color: #e65c00;
            color: white;
        }

        .tab-content {
            display: none;
            background-color: #fff0e0;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .tab-content.active {
            display: block;
        }

        /* Formul√°rios */
        .form-section {
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }

        .form-group {
            margin-bottom: 15px;
        }

        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #8B4513;
        }

        input, select, textarea {
            width: 100%;
            padding: 10px;
            border: 2px solid #ffc285;
            border-radius: 5px;
            font-size: 16px;
            box-sizing: border-box;
        }

        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: #e65c00;
        }

        textarea {
            resize: vertical;
            min-height: 100px;
        }

        .btn {
            background-color: #e65c00;
            color: white;
            padding: 12px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            margin: 5px;
            transition: background-color 0.3s;
        }

        .btn:hover {
            background-color: #d63384;
        }

        .btn-secondary {
            background-color: #ffc285;
            color: #8B4513;
        }

        .btn-secondary:hover {
            background-color: #ffb95c;
        }

        .btn-danger {
            background-color: #dc3545;
        }

        .btn-danger:hover {
            background-color: #c82333;
        }

        /* Tabela de produtos */
        .products-table {
            background-color: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        th, td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #ffc285;
        }

        th {
            background-color: #ffcf96;
            font-weight: bold;
            color: #8B4513;
        }

        .product-item {
            transition: background-color 0.3s;
        }

        .product-item:hover {
            background-color: #fff5ec;
        }

        .product-actions {
            display: flex;
            gap: 5px;
        }

        .product-image {
            width: 60px;
            height: 60px;
            object-fit: cover;
            border-radius: 5px;
        }

        /* Estat√≠sticas */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: linear-gradient(45deg, #ffc285, #ffb95c);
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            color: #8B4513;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        .stat-number {
            font-size: 2.5em;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .stat-label {
            font-size: 1.1em;
            opacity: 0.8;
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
        }

        .modal-content {
            background-color: white;
            margin: 5% auto;
            padding: 20px;
            border-radius: 10px;
            width: 90%;
            max-width: 600px;
            max-height: 80%;
            overflow-y: auto;
        }

        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }

        .close:hover {
            color: #000;
        }

        /* Responsivo */
        @media (max-width: 768px) {
            .tabs {
                flex-direction: column;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            .container {
                padding: 10px;
            }
        }

        .success-message {
            background-color: #d4edda;
            color: #155724;
            padding: 10px;
            border-radius: 5px;
            margin-bottom: 15px;
            display: none;
        }

        .error-message {
            background-color: #f8d7da;
            color: #721c24;
            padding: 10px;
            border-radius: 5px;
            margin-bottom: 15px;
            display: none;
        }
    </style>
</head>
<body>
    <div class="back-link">
        <a href="labub√¥nicos.html">‚Üê Voltar ao Menu Principal</a>
    </div>

    <header>
        <h1>üçî‚ú® Painel Administrativo - Alpha's Burgues</h1>
        <p>Gerencie produtos, pedidos e estat√≠sticas da sua loja</p>
    </header>

    <div class="container">
        <!-- Abas de navega√ß√£o -->
        <div class="tabs">
            <button class="tab-button active" onclick="openTab(event, 'dashboard')">üìä Dashboard</button>
            <button class="tab-button" onclick="openTab(event, 'produtos')">üõçÔ∏è Produtos</button>
            <button class="tab-button" onclick="openTab(event, 'pedidos')">üìã Pedidos</button>
            <button class="tab-button" onclick="openTab(event, 'configuracoes')">‚öôÔ∏è Configura√ß√µes</button>
        </div>

        <!-- Dashboard -->
        <div id="dashboard" class="tab-content active">
            <h2>üìä Dashboard</h2>
            
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-number" id="total-produtos">8</div>
                    <div class="stat-label">Produtos Cadastrados</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="pedidos-hoje">12</div>
                    <div class="stat-label">Pedidos Hoje</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="faturamento-dia">R$ 542,90</div>
                    <div class="stat-label">Faturamento do Dia</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="produto-popular">Combo Virg√≠nia</div>
                    <div class="stat-label">Produto Mais Vendido</div>
                </div>
            </div>
            
            <div class="form-section">
                <h3>üìà Resumo de Atividades</h3>
                <p>Seja bem-vindo ao painel administrativo! Aqui voc√™ pode:</p>
                <ul>
                    <li>‚úÖ Gerenciar produtos do card√°pio</li>
                    <li>‚úÖ Acompanhar pedidos</li>
                    <li>‚úÖ Visualizar estat√≠sticas de vendas</li>
                    <li>‚úÖ Configurar informa√ß√µes da loja</li>
                </ul>
            </div>
        </div>

        <!-- Produtos -->
        <div id="produtos" class="tab-content">
            <h2>üõçÔ∏è Gerenciar Produtos</h2>
            
            <div class="success-message" id="produto-success"></div>
            <div class="error-message" id="produto-error"></div>
            
            <div class="form-section">
                <h3>‚ûï Adicionar Novo Produto</h3>
                <form id="form-produto">
                    <div class="form-group">
                        <label for="nome-produto">Nome do Produto:</label>
                        <input type="text" id="nome-produto" name="nome" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="categoria-produto">Categoria:</label>
                        <select id="categoria-produto" name="categoria" required>
                            <option value="">Selecione uma categoria</option>
                            <option value="combos">Combos</option>
                            <option value="doces">Doces</option>
                            <option value="bebidas">Bebidas</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="preco-produto">Pre√ßo (R$):</label>
                        <input type="number" id="preco-produto" name="preco" step="0.01" min="0" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="descricao-produto">Descri√ß√£o:</label>
                        <textarea id="descricao-produto" name="descricao" placeholder="Descreva o produto..."></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label for="imagem-produto">URL da Imagem:</label>
                        <input type="url" id="imagem-produto" name="imagem" placeholder="IMAGEM.PNG">
                    </div>
                    
                    <button type="submit" class="btn">‚ûï Adicionar Produto</button>
                    <button type="button" class="btn btn-secondary" onclick="limparFormulario()">üóëÔ∏è Limpar</button>
                </form>
            </div>
            
            <div class="products-table">
                <h3>üì¶ Produtos Cadastrados</h3>
                <table>
                    <thead>
                        <tr>
                            <th>Imagem</th>
                            <th>Nome</th>
                            <th>Categoria</th>
                            <th>Pre√ßo</th>
                            <th>A√ß√µes</th>
                        </tr>
                    </thead>
                    <tbody id="tabela-produtos">
                        <!-- Produtos ser√£o carregados aqui -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Pedidos -->
        <div id="pedidos" class="tab-content">
            <h2>üìã Gerenciar Pedidos</h2>
            <div class="products-table">
                <table>
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Cliente</th>
                            <th>Itens</th>
                            <th>Total</th>
                            <th>Status</th>
                            <th>Data/Hora</th>
                            <th>A√ß√µes</th>
                        </tr>
                    </thead>
                    <tbody id="tabela-pedidos">

                    </tbody>
                </table>
            </div>
        </div>

        <!-- Configura√ß√µes -->
        <div id="configuracoes" class="tab-content">
            <h2>‚öôÔ∏è Configura√ß√µes da Loja</h2>   
            <div class="form-section">
                <h3>üë• Usu√°rios Cadastrados</h3>
                <p>Lista de todos os usu√°rios registrados no sistema:</p>
                <button class="btn btn-secondary" onclick="mostrarUsuarios()">Ver Usu√°rios</button>
                <button class="btn btn-danger" onclick="limparUsuarios()">Limpar Todos os Usu√°rios</button>
                <div id="lista-usuarios" style="display: none; margin-top: 15px; max-height: 300px; overflow-y: auto; background: white; padding: 15px; border-radius: 8px;"></div>
            </div>
            
            <div class="form-section">
                <h3>üóÑÔ∏è Backup e Dados</h3>
                <p>Fa√ßa backup dos seus dados regularmente para evitar perdas.</p>
                <button class="btn btn-secondary" onclick="exportarDados()">üì• Exportar Dados</button>
                <button class="btn btn-secondary" onclick="importarDados()">üì§ Importar Dados</button>
                <button class="btn btn-danger" onclick="confirmarLimparDados()">üóëÔ∏è Limpar Todos os Dados</button>
            </div>
        </div>
    </div>

    <!-- Modal para editar produto -->
    <div id="modal-editar" class="modal">
        <div class="modal-content">
            <span class="close" onclick="fecharModal()">&times;</span>
            <h2>‚úèÔ∏è Editar Produto</h2>
            <form id="form-editar-produto">
                <input type="hidden" id="edit-id">
                <div class="form-group">
                    <label for="edit-nome">Nome:</label>
                    <input type="text" id="edit-nome" required>
                </div>
                <div class="form-group">
                    <label for="edit-categoria">Categoria:</label>
                    <select id="edit-categoria" required>
                        <option value="combos">Combos</option>
                        <option value="doces">Doces</option>
                        <option value="bebidas">Bebidas</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="edit-preco">Pre√ßo (R$):</label>
                    <input type="number" id="edit-preco" step="0.01" min="0" required>
                </div>
                <div class="form-group">
                    <label for="edit-descricao">Descri√ß√£o:</label>
                    <textarea id="edit-descricao"></textarea>
                </div>
                <div class="form-group">
                    <label for="edit-imagem">URL da Imagem:</label>
                    <input type="url" id="edit-imagem">
                </div>
                <button type="submit" class="btn">üíæ Salvar Altera√ß√µes</button>
                <button type="button" class="btn btn-secondary" onclick="fecharModal()">‚ùå Cancelar</button>
            </form>
        </div>
    </div>

    <script>
        // SISTEMA DE SINCRONIZA√á√ÉO COM O SITE PRINCIPAL
        class AdminSync {
            constructor() {
                this.init();
            }

            init() {
                // Escutar mudan√ßas do site principal
                window.addEventListener('storage', (e) => {
                    if (e.key === 'carrinho' || e.key === 'usuario_logado') {
                        this.processarPedidoDoSite();
                    }
                });

                // Verificar pedidos pendentes do site
                this.processarPedidoDoSite();
                
                // Carregar dados existentes do site principal
                this.sincronizarProdutosComSite();
            }

            processarPedidoDoSite() {
                try {
                    const carrinho = JSON.parse(localStorage.getItem('carrinho') || '[]');
                    const usuarioLogado = JSON.parse(localStorage.getItem('usuario_logado') || '{}');
                    
                    if (carrinho.length > 0) {
                        this.criarPedidoAdmin(carrinho, usuarioLogado);
                        // Limpar carrinho ap√≥s processar
                        localStorage.removeItem('carrinho');
                    }
                } catch (error) {
                    console.error('Erro ao processar pedido do site:', error);
                }
            }

            criarPedidoAdmin(carrinho, usuario) {
                const pedidos = JSON.parse(localStorage.getItem('admin_pedidos') || '[]');
                
                const novoPedido = {
                    id: Date.now(),
                    cliente: usuario.nome || 'Cliente An√¥nimo',
                    email: usuario.email || '',
                    telefone: usuario.telefone || '',
                    endereco: usuario.endereco || '',
                    itens: carrinho.map(item => ({
                        produto: item.produto || item.nome,
                        quantidade: item.quantidade,
                        preco: item.preco,
                        subtotal: item.preco * item.quantidade
                    })),
                    total: carrinho.reduce((sum, item) => sum + (item.preco * item.quantidade), 0),
                    status: 'pendente',
                    dataHora: new Date().toLocaleString('pt-BR'),
                    origem: 'site'
                };

                pedidos.push(novoPedido);
                localStorage.setItem('admin_pedidos', JSON.stringify(pedidos));
                
                // Atualizar interface se estiver na aba de pedidos
                this.atualizarTabelaPedidos();
                
                // Mostrar notifica√ß√£o
                this.mostrarNotificacao('Novo pedido recebido do site!');
            }

            sincronizarProdutosComSite() {
                // Garantir que produtos do admin sejam os mesmos do site
                const produtosAdmin = JSON.parse(localStorage.getItem('alphas_produtos') || '[]');
                localStorage.setItem('produtos_cardapio', JSON.stringify(produtosAdmin));
            }

            atualizarTabelaPedidos() {
                const pedidos = JSON.parse(localStorage.getItem('admin_pedidos') || '[]');
                const tabela = document.getElementById('tabela-pedidos');
                
                if (!tabela) return;

                tabela.innerHTML = '';

                pedidos.forEach(pedido => {
                    const row = document.createElement('tr');
                    row.className = 'product-item';
                    
                    const itensTexto = pedido.itens.map(item => 
                        `${item.produto} (${item.quantidade}x)`
                    ).join(', ');

                    row.innerHTML = `
                        <td>#${pedido.id.toString().padStart(3, '0')}</td>
                        <td>${pedido.cliente}</td>
                        <td title="${itensTexto}">${itensTexto.substring(0, 50)}${itensTexto.length > 50 ? '...' : ''}</td>
                        <td>R$ ${pedido.total.toFixed(2)}</td>
                        <td>
                            <select onchange="adminSync.atualizarStatusPedido(${pedido.id}, this.value)" style="padding: 5px;">
                                <option value="pendente" ${pedido.status === 'pendente' ? 'selected' : ''}>üü° Pendente</option>
                                <option value="confirmado" ${pedido.status === 'confirmado' ? 'selected' : ''}>üîµ Confirmado</option>
                                <option value="preparando" ${pedido.status === 'preparando' ? 'selected' : ''}>üü† Preparando</option>
                                <option value="pronto" ${pedido.status === 'pronto' ? 'selected' : ''}>üü¢ Pronto</option>
                                <option value="entregue" ${pedido.status === 'entregue' ? 'selected' : ''}>‚úÖ Entregue</option>
                                <option value="cancelado" ${pedido.status === 'cancelado' ? 'selected' : ''}>‚ùå Cancelado</option>
                            </select>
                        </td>
                        <td>${pedido.dataHora}</td>
                        <td class="product-actions">
                            <button class="btn btn-secondary" onclick="adminSync.verDetalhesPedido(${pedido.id})" title="Ver detalhes">üëÅÔ∏è</button>
                            <button class="btn btn-danger" onclick="adminSync.cancelarPedido(${pedido.id})" title="Cancelar pedido">‚ùå</button>
                        </td>
                    `;
                    tabela.appendChild(row);
                });

                // Atualizar estat√≠sticas
                this.atualizarEstatisticas(pedidos);
            }

            atualizarEstatisticas(pedidos) {
                const hoje = new Date().toDateString();
                const pedidosHoje = pedidos.filter(p => new Date(p.dataHora).toDateString() === hoje);
                
                document.getElementById('pedidos-hoje').textContent = pedidosHoje.length;
                
                const faturamentoHoje = pedidosHoje
                    .filter(p => p.status !== 'cancelado')
                    .reduce((sum, p) => sum + p.total, 0);
                    
                document.getElementById('faturamento-dia').textContent = `R$ ${faturamentoHoje.toFixed(2)}`;
                
                // Produto mais vendido
                const produtosVendidos = {};
                pedidosHoje.forEach(pedido => {
                    pedido.itens.forEach(item => {
                        produtosVendidos[item.produto] = (produtosVendidos[item.produto] || 0) + item.quantidade;
                    });
                });
                
                const produtoPopular = Object.keys(produtosVendidos).reduce((a, b) => 
                    produtosVendidos[a] > produtosVendidos[b] ? a : b, 'Nenhum'
                );
                
                document.getElementById('produto-popular').textContent = produtoPopular;
            }

            atualizarStatusPedido(id, novoStatus) {
                const pedidos = JSON.parse(localStorage.getItem('admin_pedidos') || '[]');
                const pedido = pedidos.find(p => p.id === id);
                
                if (pedido) {
                    pedido.status = novoStatus;
                    pedido.ultimaAtualizacao = new Date().toLocaleString('pt-BR');
                    localStorage.setItem('admin_pedidos', JSON.stringify(pedidos));
                    
                    this.mostrarNotificacao(`Pedido #${id} atualizado para: ${this.getStatusTexto(novoStatus)}`);
                    this.atualizarEstatisticas(pedidos);
                }
            }

            verDetalhesPedido(id) {
                const pedidos = JSON.parse(localStorage.getItem('admin_pedidos') || '[]');
                const pedido = pedidos.find(p => p.id === id);
                
                if (pedido) {
                    let detalhes = `
=== PEDIDO #${id} ===

Cliente: ${pedido.cliente}
Email: ${pedido.email || 'N√£o informado'}
Telefone: ${pedido.telefone || 'N√£o informado'}
Endere√ßo: ${pedido.endereco || 'N√£o informado'}

Status: ${this.getStatusTexto(pedido.status)}
Data/Hora: ${pedido.dataHora}
${pedido.ultimaAtualizacao ? `√öltima atualiza√ß√£o: ${pedido.ultimaAtualizacao}` : ''}

=== ITENS ===
`;
                    
                    pedido.itens.forEach(item => {
                        detalhes += `‚Ä¢ ${item.produto} - Qtd: ${item.quantidade}x - R$ ${item.preco.toFixed(2)} = R$ ${item.subtotal.toFixed(2)}\n`;
                    });
                    
                    detalhes += `\nTOTAL: R$ ${pedido.total.toFixed(2)}`;
                    
                    alert(detalhes);
                }
            }

            cancelarPedido(id) {
                if (confirm('Tem certeza que deseja cancelar este pedido?')) {
                    this.atualizarStatusPedido(id, 'cancelado');
                }
            }

            getStatusTexto(status) {
                const statusMap = {
                    'pendente': 'üü° Pendente',
                    'confirmado': 'üîµ Confirmado', 
                    'preparando': 'üü† Preparando',
                    'pronto': 'üü¢ Pronto',
                    'entregue': '‚úÖ Entregue',
                    'cancelado': '‚ùå Cancelado'
                };
                return statusMap[status] || status;
            }

            mostrarNotificacao(mensagem) {
                // Criar notifica√ß√£o toast
                const toast = document.createElement('div');
                toast.style.cssText = `
                    position: fixed;
                    top: 20px;
                    right: 20px;
                    background: #4CAF50;
                    color: white;
                    padding: 15px 20px;
                    border-radius: 5px;
                    z-index: 9999;
                    box-shadow: 0 4px 8px rgba(0,0,0,0.2);
                    animation: slideIn 0.3s ease;
                `;
                toast.textContent = mensagem;
                
                document.body.appendChild(toast);
                
                setTimeout(() => {
                    toast.style.animation = 'slideOut 0.3s ease';
                    setTimeout(() => toast.remove(), 300);
                }, 3000);
            }

            sincronizarProdutosParaSite() {
                // Quando produtos s√£o modificados no admin, atualizar no site
                localStorage.setItem('produtos_cardapio', JSON.stringify(produtos));
                this.mostrarNotificacao('Produtos sincronizados com o site principal!');
            }
        }

        // Instanciar sistema de sincroniza√ß√£o
        const adminSync = new AdminSync();

        // Produtos padr√£o
        const produtosPadrao = [
            {
                id: 1,
                nome: "Combo Virg√≠nia",
                categoria: "combos",
                preco: 200.00,
                descricao: "Burger artesanal com brinde especial",
                imagem: ""
            },
            {
                id: 2,
                nome: "Combo Labub√¥nico", 
                categoria: "combos",
                preco: 90.00,
                descricao: "Combo delicioso com brinquedo do Labubu",
                imagem: ""
            },
            {
                id: 3,
                nome: "Combo Boobie Goods",
                categoria: "combos", 
                preco: 75.90,
                descricao: "Perfeito para quem ama lanche bom e mimo fofo",
                imagem: ""
            },
            {
                id: 4,
                nome: "Morango do Amor",
                categoria: "doces",
                preco: 40.00,
                descricao: "Morangos frescos com chocolate",
                imagem: ""
            },
            {
                id: 5,
                nome: "Waffles",
                categoria: "doces",
                preco: 50.00,
                descricao: "Waffles crocantes com chantilly e frutas",
                imagem: ""
            },
            {
                id: 6,
                nome: "Milkshake de Pistache",
                categoria: "bebidas",
                preco: 25.00,
                descricao: "Milkshake cremoso de pistache",
                imagem: ""
            },
            {
                id: 7,
                nome: "Duo Pistachudo",
                categoria: "bebidas",
                preco: 60.00,
                descricao: "Milkshake de Pistache + Morango do Amor com brigadeiro de pistache",
                imagem: ""
            },
            {
                id: 8,
                nome: "Refrigerante 350ml",
                categoria: "bebidas",
                preco: 16.90,
                descricao: "Refrigerante gelado dispon√≠vel em diversos sabores",
                imagem: ""
            }
        ];

        // Carregar produtos do localStorage ou usar padr√£o
        let produtos = [];
        let proximoId = 1;

        function inicializarProdutos() {
            try {
                const produtosLocalStorage = localStorage.getItem('alphas_produtos');
                if (produtosLocalStorage) {
                    produtos = JSON.parse(produtosLocalStorage);
                } else {
                    produtos = [...produtosPadrao];
                    localStorage.setItem('alphas_produtos', JSON.stringify(produtos));
                }
                proximoId = Math.max(...produtos.map(p => p.id), 0) + 1;
            } catch (error) {
                console.error('Erro ao carregar produtos:', error);
                produtos = [...produtosPadrao];
                localStorage.setItem('alphas_produtos', JSON.stringify(produtos));
            }
        }

        // Controle de abas
        function openTab(evt, tabName) {
            var i, tabcontent, tablinks;
            tabcontent = document.getElementsByClassName("tab-content");
            for (i = 0; i < tabcontent.length; i++) {
                tabcontent[i].classList.remove("active");
            }
            tablinks = document.getElementsByClassName("tab-button");
            for (i = 0; i < tablinks.length; i++) {
                tablinks[i].classList.remove("active");
            }
            document.getElementById(tabName).classList.add("active");
            evt.currentTarget.classList.add("active");
        }

        // Carregar produtos na tabela
        function carregarProdutos() {
            const tabela = document.getElementById('tabela-produtos');
            if (!tabela) return;
            
            tabela.innerHTML = '';
            
            produtos.forEach(produto => {
                const row = document.createElement('tr');
                row.className = 'product-item';
                row.innerHTML = `
                    <td>
                        <div style="width: 60px; height: 60px; background-color: #ffc285; border-radius: 5px; display: flex; align-items: center; justify-content: center; color: #8B4513; font-size: 12px;">
                            ${produto.imagem ? `<img src="${produto.imagem}" alt="${produto.nome}" class="product-image" onerror="this.style.display='none'">` : 'Sem Imagem'}
                        </div>
                    </td>
                    <td>${produto.nome}</td>
                    <td>${produto.categoria}</td>
                    <td>R$ ${produto.preco.toFixed(2)}</td>
                    <td class="product-actions">
                        <button class="btn btn-secondary" onclick="editarProduto(${produto.id})">‚úèÔ∏è</button>
                        <button class="btn btn-danger" onclick="excluirProduto(${produto.id})">üóëÔ∏è</button>
                    </td>
                `;
                tabela.appendChild(row);
            });
            
            // Atualizar estat√≠sticas
            document.getElementById('total-produtos').textContent = produtos.length;
        }

        // Adicionar produto
        document.addEventListener('DOMContentLoaded', function() {
            const formProduto = document.getElementById('form-produto');
            if (formProduto) {
                formProduto.addEventListener('submit', function(e) {
                    e.preventDefault();
                    
                    const formData = new FormData(this);
                    const novoProduto = {
                        id: proximoId++,
                        nome: formData.get('nome'),
                        categoria: formData.get('categoria'),
                        preco: parseFloat(formData.get('preco')),
                        descricao: formData.get('descricao') || '',
                        imagem: formData.get('imagem') || ''
                    };
                    
                    produtos.push(novoProduto);
                    localStorage.setItem('alphas_produtos', JSON.stringify(produtos));
                    carregarProdutos();
                    mostrarMensagem('produto-success', 'Produto adicionado com sucesso!');
                    this.reset();
                });
            }
        });

        // Editar produto
        function editarProduto(id) {
            const produto = produtos.find(p => p.id === id);
            if (produto) {
                document.getElementById('edit-id').value = produto.id;
                document.getElementById('edit-nome').value = produto.nome;
                document.getElementById('edit-categoria').value = produto.categoria;
                document.getElementById('edit-preco').value = produto.preco;
                document.getElementById('edit-descricao').value = produto.descricao;
                document.getElementById('edit-imagem').value = produto.imagem;
                document.getElementById('modal-editar').style.display = 'block';
            }
        }

        // Salvar edi√ß√£o
        document.addEventListener('DOMContentLoaded', function() {
            const formEditarProduto = document.getElementById('form-editar-produto');
            if (formEditarProduto) {
                formEditarProduto.addEventListener('submit', function(e) {
                    e.preventDefault();
                    
                    const id = parseInt(document.getElementById('edit-id').value);
                    const produto = produtos.find(p => p.id === id);
                    
                    if (produto) {
                        produto.nome = document.getElementById('edit-nome').value;
                        produto.categoria = document.getElementById('edit-categoria').value;
                        produto.preco = parseFloat(document.getElementById('edit-preco').value);
                        produto.descricao = document.getElementById('edit-descricao').value;
                        produto.imagem = document.getElementById('edit-imagem').value;
                        
                        localStorage.setItem('alphas_produtos', JSON.stringify(produtos));
                        carregarProdutos();
                        fecharModal();
                        mostrarMensagem('produto-success', 'Produto atualizado com sucesso!');
                    }
                });
            }
        });

        // Excluir produto
        function excluirProduto(id) {
            if (confirm('Tem certeza que deseja excluir este produto?')) {
                produtos = produtos.filter(p => p.id !== id);
                localStorage.setItem('alphas_produtos', JSON.stringify(produtos));
                carregarProdutos();
                mostrarMensagem('produto-success', 'Produto exclu√≠do com sucesso!');
            }
        }

        // Modal
        function fecharModal() {
            document.getElementById('modal-editar').style.display = 'none';
        }

        // Limpar formul√°rio
        function limparFormulario() {
            document.getElementById('form-produto').reset();
        }

        // Mostrar mensagens
        function mostrarMensagem(elementId, mensagem) {
            const elemento = document.getElementById(elementId);
            if (elemento) {
                elemento.textContent = mensagem;
                elemento.style.display = 'block';
                setTimeout(() => {
                    elemento.style.display = 'none';
                }, 5000);
            }
        }

        // Pedidos
        function atualizarStatusPedido(id, status) {
            console.log(`Pedido ${id} atualizado para: ${status}`);
            mostrarMensagem('produto-success', `Status do pedido #${id} atualizado para: ${status}`);
        }

        function verDetalhesPedido(id) {
            alert(`Visualizando detalhes do pedido #${id}`);
        }

        function cancelarPedido(id) {
            if (confirm('Tem certeza que deseja cancelar este pedido?')) {
                console.log(`Pedido ${id} cancelado`);
                mostrarMensagem('produto-success', `Pedido #${id} foi cancelado`);
            }
        }

        // Configura√ß√µes
        function salvarConfiguracoes() {
            const config = {
                nome: document.getElementById('nome-loja').value,
                telefone: document.getElementById('telefone-loja').value,
                endereco: document.getElementById('endereco-loja').value,
                horario: document.getElementById('horario-funcionamento').value
            };
            localStorage.setItem('alphas_config', JSON.stringify(config));
            mostrarMensagem('produto-success', 'Configura√ß√µes salvas com sucesso!');
        }

        function atualizarAparencia() {
            const cor = document.getElementById('cor-principal').value;
            const logo = document.getElementById('logo-loja').value;
            
            localStorage.setItem('alphas_cor', cor);
            localStorage.setItem('alphas_logo', logo);
            
            mostrarMensagem('produto-success', 'Apar√™ncia atualizada!');
        }

        function mostrarUsuarios() {
            const usuarios = JSON.parse(localStorage.getItem('alphas_usuarios') || '[]');
            const container = document.getElementById('lista-usuarios');
            
            if (usuarios.length === 0) {
                container.innerHTML = '<p>Nenhum usu√°rio cadastrado.</p>';
            } else {
                let html = '<h4>Usu√°rios Cadastrados:</h4><table style="width: 100%; border-collapse: collapse;"><thead><tr style="background: #ffc285;"><th style="padding: 8px; border: 1px solid #ddd;">Nome</th><th style="padding: 8px; border: 1px solid #ddd;">Email</th><th style="padding: 8px; border: 1px solid #ddd;">Tipo</th></tr></thead><tbody>';
                
                usuarios.forEach(usuario => {
                    html += `<tr><td style="padding: 8px; border: 1px solid #ddd;">${usuario.nome || 'N/A'}</td><td style="padding: 8px; border: 1px solid #ddd;">${usuario.email || 'N/A'}</td><td style="padding: 8px; border: 1px solid #ddd;"><span style="padding: 3px 8px; border-radius: 15px; font-size: 12px; background: ${usuario.tipo === 'admin' ? '#dc3545' : '#28a745'}; color: white;">${usuario.tipo === 'admin' ? 'Admin' : 'Cliente'}</span></td></tr>`;
                });
                
                html += '</tbody></table>';
                container.innerHTML = html;
            }
            
            container.style.display = container.style.display === 'none' ? 'block' : 'none';
        }

        function limparUsuarios() {
            if (confirm('ATEN√á√ÉO: Esta a√ß√£o ir√° remover TODOS os usu√°rios cadastrados. Continuar?')) {
                localStorage.removeItem('alphas_usuarios');
                mostrarMensagem('produto-success', 'Todos os usu√°rios foram removidos.');
                document.getElementById('lista-usuarios').style.display = 'none';
            }
        }

        function exportarDados() {
            const dados = {
                produtos: produtos,
                usuarios: JSON.parse(localStorage.getItem('alphas_usuarios') || '[]'),
                config: JSON.parse(localStorage.getItem('alphas_config') || '{}')
            };
            
            const dataStr = JSON.stringify(dados, null, 2);
            const blob = new Blob([dataStr], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'alphas-burgues-backup.json';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            mostrarMensagem('produto-success', 'Dados exportados com sucesso!');
        }

        function importarDados() {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = '.json';
            input.onchange = function(e) {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        try {
                            const dados = JSON.parse(e.target.result);
                            
                            if (dados.produtos) {
                                produtos = dados.produtos;
                                localStorage.setItem('alphas_produtos', JSON.stringify(produtos));
                            }
                            
                            if (dados.usuarios) {
                                localStorage.setItem('alphas_usuarios', JSON.stringify(dados.usuarios));
                            }
                            
                            if (dados.config) {
                                localStorage.setItem('alphas_config', JSON.stringify(dados.config));
                            }
                            
                            carregarProdutos();
                            mostrarMensagem('produto-success', 'Dados importados com sucesso!');
                        } catch (error) {
                            mostrarMensagem('produto-error', 'Erro ao importar dados. Verifique o arquivo.');
                        }
                    };
                    reader.readAsText(file);
                }
            };
            input.click();
        }

        function confirmarLimparDados() {
            if (confirm('ATEN√á√ÉO: Esta a√ß√£o ir√° apagar TODOS os dados. Esta a√ß√£o n√£o pode ser desfeita. Tem certeza?')) {
                if (confirm('√öltima confirma√ß√£o: Todos os dados ser√£o perdidos permanentemente. Continuar?')) {
                    localStorage.removeItem('alphas_produtos');
                    localStorage.removeItem('alphas_usuarios');
                    localStorage.removeItem('alphas_config');
                    localStorage.removeItem('alphas_pedidos');
                    
                    produtos = [];
                    carregarProdutos();
                    mostrarMensagem('produto-success', 'Todos os dados foram limpos.');
                }
            }
        }

        // Inicializa√ß√£o
        document.addEventListener('DOMContentLoaded', function() {
            inicializarProdutos();
            carregarProdutos();
        });

        // Fechar modal quando clicar fora
        window.onclick = function(event) {
            const modal = document.getElementById('modal-editar');
            if (event.target === modal) {
                fecharModal();
            }
        }
    </script>
</body>
</html>